<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8"/><style>
table {border: medium solid #6495ed;border-collapse: collapse;width: 100%;} th{font-family: monospace;border: thin solid #6495ed;padding: 5px;background-color: #D0E3FA;}th{text-align: left;}td{font-family: sans-serif;border: thin solid #6495ed;padding: 5px;text-align: center;}.odd{background:#e8edff;}img{padding:5px; border:solid; border-color: #dddddd #aaaaaa #aaaaaa #dddddd; border-width: 1px 2px 2px 1px; background-color:white;}</style>
</head>
<body>
<table><tr><th colspan="3"><pre><code>SELECT<br>    cruce.id,<br>    cruce.nombre,<br>    SUM(<br>        cruce.resultado<br>    ) cuenta_correctas<br>FROM<br>    (<br>        SELECT<br>            u.id,<br>            u.nombre,<br>            CASE<br>                WHEN p.respuesta_correcta = r.respuesta THEN 1<br>                ELSE 0<br>            END AS resultado<br>        FROM<br>            preguntas AS p<br>            INNER JOIN respuestas AS r ON r.pregunta_id = p.id<br>            INNER JOIN usuarios AS u ON r.usuario_id = u.id<br>    ) cruce<br>GROUP BY<br>    cruce.id,<br>    cruce.nombre<br>ORDER BY<br>    cruce.id</code></pre></th></tr><tr><th>id</th><th>nombre</th><th>cuenta_correctas</th></tr><tr class="odd"><td>1</td><td>usuario_1</td><td>4</td></tr>
<tr><td>2</td><td>usuario_2</td><td>3</td></tr>
<tr class="odd"><td>3</td><td>usuario_3</td><td>3</td></tr>
<tr><td>4</td><td>usuario_4</td><td>1</td></tr>
<tr class="odd"><td>5</td><td>usuario_5</td><td>2</td></tr>
</table></body></html>